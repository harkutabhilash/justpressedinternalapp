{"ast":null,"code":"var _jsxFileName = \"/Users/abhilash/Downloads/jp-internal-app/src/DynamicFormRenderer.js\",\n  _s = $RefreshSig$();\n// src/DynamicFormRenderer.js\nimport React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport FormField from './components/FormField';\nimport Loader from './components/Loader';\nimport * as dateUtils from './utils/dateUtils';\nimport { validateForm } from './utils/formValidation';\nimport { callBackend, fetchAppModules } from './utils/moduleStructureAPI';\nimport { getOptionsFromModuleSource } from './utils/dropdownProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DynamicFormRenderer({\n  config,\n  dropdowns,\n  module\n}) {\n  _s();\n  // ---- never return before hooks ----\n  const isValidConfig = Array.isArray(config);\n\n  // Derived lists (defensive fallback to [])\n  const visibleFields = useMemo(() => Array.isArray(config) ? config.filter(f => f && f.key) : [], [config]);\n  const groupedFields = useMemo(() => {\n    const groups = {};\n    for (const field of visibleFields) {\n      const row = field.formRow || 0;\n      if (!groups[row]) groups[row] = [];\n      groups[row].push(field);\n    }\n    Object.keys(groups).forEach(rk => {\n      groups[rk].sort((a, b) => (Number(a.formColumn) || 0) - (Number(b.formColumn) || 0));\n    });\n    return groups;\n  }, [visibleFields]);\n  const sortedRowKeys = useMemo(() => Object.keys(groupedFields).sort((a, b) => Number(a) - Number(b)), [groupedFields]);\n\n  // Local state\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Dropdown state\n  const [dropdownOptions, setDropdownOptions] = useState(dropdowns || {});\n  useEffect(() => {\n    setDropdownOptions(dropdowns || {});\n  }, [dropdowns]);\n\n  // Preload module-based dropdowns once per config change\n  useEffect(() => {\n    const sources = visibleFields.filter(f => f.inputType === 'dropdown' && f.dropdownSource && f.dropdownSource.includes('.')).map(f => ({\n      key: f.key,\n      src: f.dropdownSource\n    }));\n    sources.forEach(({\n      key,\n      src\n    }) => {\n      const hasAny = Array.isArray(dropdownOptions[key]) && dropdownOptions[key].length > 0;\n      if (hasAny) return;\n      getOptionsFromModuleSource(src).then(opts => setDropdownOptions(prev => ({\n        ...prev,\n        [key]: opts || []\n      }))).catch(() => setDropdownOptions(prev => ({\n        ...prev,\n        [key]: []\n      })));\n    });\n    // We intentionally only depend on visibleFields; dropdownOptions presence is checked per key\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visibleFields]);\n\n  // Initialize defaults whenever visible fields change\n  useEffect(() => {\n    const next = {};\n    for (const field of visibleFields) {\n      next[field.key] = field.dataType === 'date' ? new Date().toISOString().split('T')[0] : '';\n    }\n    setFormData(next);\n    setErrors({});\n  }, [visibleFields]);\n  const handleChange = useCallback((key, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  }, []);\n  const handleDropdownOpen = useCallback(field => {\n    const key = field.key;\n    const src = (field === null || field === void 0 ? void 0 : field.dropdownSource) || '';\n    const hasAny = Array.isArray(dropdownOptions[key]) && dropdownOptions[key].length > 0;\n    const looksLikeModuleSource = src.includes('.');\n    if (hasAny || !looksLikeModuleSource) {\n      return Promise.resolve(dropdownOptions[key] || []);\n    }\n    return getOptionsFromModuleSource(src).then(opts => {\n      setDropdownOptions(prev => ({\n        ...prev,\n        [key]: opts || []\n      }));\n      return opts || [];\n    }).catch(e => {\n      console.error(`Failed to fetch options for ${key} from ${src}`, e);\n      setDropdownOptions(prev => ({\n        ...prev,\n        [key]: []\n      }));\n      return [];\n    });\n  }, [dropdownOptions]);\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    const newErrors = validateForm(module, visibleFields, formData);\n    setErrors(newErrors);\n    if (Object.keys(newErrors).length > 0) return;\n    setIsSubmitting(true);\n    try {\n      var _appModulesCache, _appModulesCache$data, _matched$modules$find;\n      const user = JSON.parse(sessionStorage.getItem('user'));\n      const username = (user === null || user === void 0 ? void 0 : user.username) || 'Unknown';\n      const enrichedData = {\n        ...formData\n      };\n      for (const field of Array.isArray(config) ? config : []) {\n        if (field.dataType === 'date' && enrichedData[field.key]) {\n          enrichedData[field.key] = dateUtils.formatDateToDDMMMYYYY(enrichedData[field.key]);\n        }\n      }\n      enrichedData.createdBy = username;\n      enrichedData.modifiedBy = username;\n      enrichedData.createdOn = dateUtils.getCurrentDateTime();\n      enrichedData.modifiedOn = enrichedData.createdOn;\n      let appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      if (!appModulesCache || !appModulesCache.data) {\n        await fetchAppModules(true);\n        appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      }\n      const matched = (_appModulesCache = appModulesCache) === null || _appModulesCache === void 0 ? void 0 : (_appModulesCache$data = _appModulesCache.data) === null || _appModulesCache$data === void 0 ? void 0 : _appModulesCache$data.find(group => group.modules.some(m => m.module === module));\n      const sheetId = matched === null || matched === void 0 ? void 0 : (_matched$modules$find = matched.modules.find(m => m.module === module)) === null || _matched$modules$find === void 0 ? void 0 : _matched$modules$find.sheetId;\n      if (!sheetId) {\n        console.error(`❌ No sheetId found for module ${module}`);\n        alert('Error: Unable to find sheetId for submission.');\n        return;\n      }\n      console.log('📤 Payload being sent to backend:', {\n        module,\n        sheetId,\n        tab: 'master',\n        entry: enrichedData\n      });\n      await callBackend('saveLogEntry', {\n        module,\n        sheetId,\n        tab: 'master',\n        entry: enrichedData\n      });\n      alert('✅ Form submitted!');\n      // reset\n      const reset = {};\n      for (const field of visibleFields) {\n        reset[field.key] = field.dataType === 'date' ? new Date().toISOString().split('T')[0] : '';\n      }\n      setFormData(reset);\n      setErrors({});\n    } catch (err) {\n      console.error('❌ Submission failed:', err);\n      alert('Failed to submit. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [config, formData, module, visibleFields]);\n\n  // ---- render fallback AFTER hooks have been called ----\n  if (!isValidConfig) {\n    console.error('❌ Invalid config passed to DynamicFormRenderer:', config);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-600\",\n      children: \"Unable to load form configuration.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto bg-white border rounded-lg shadow-sm\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"jp-form-area p-6 space-y-6\",\n      \"aria-busy\": isSubmitting,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jp-form-header shadow-md\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn-primary\",\n          disabled: isSubmitting,\n          children: isSubmitting ? /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"inline-flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"animate-spin h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this), \"Submitting\\u2026\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this) : 'Submit'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }, this), isSubmitting && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black/10 backdrop-blur-[1px] z-50 flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(Loader, {\n          message: \"dataBeingSubmitted\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        disabled: isSubmitting,\n        className: \"space-y-6\",\n        children: sortedRowKeys.map(rowKey => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n          children: groupedFields[rowKey].map(field => /*#__PURE__*/_jsxDEV(FormField, {\n            field: field,\n            value: formData[field.key] !== undefined ? formData[field.key] : '',\n            error: errors[field.key],\n            options: dropdownOptions[field.key] || [],\n            onDropdownOpen: () => handleDropdownOpen(field),\n            onChange: val => handleChange(field.key, val)\n          }, field.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 15\n          }, this))\n        }, rowKey, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 4\n  }, this);\n}\n_s(DynamicFormRenderer, \"dIqzkSvfSYBp/4NXcVXwhiOp/7k=\");\n_c = DynamicFormRenderer;\nexport default DynamicFormRenderer;\nvar _c;\n$RefreshReg$(_c, \"DynamicFormRenderer\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useCallback","FormField","Loader","dateUtils","validateForm","callBackend","fetchAppModules","getOptionsFromModuleSource","jsxDEV","_jsxDEV","DynamicFormRenderer","config","dropdowns","module","_s","isValidConfig","Array","isArray","visibleFields","filter","f","key","groupedFields","groups","field","row","formRow","push","Object","keys","forEach","rk","sort","a","b","Number","formColumn","sortedRowKeys","formData","setFormData","errors","setErrors","isSubmitting","setIsSubmitting","dropdownOptions","setDropdownOptions","sources","inputType","dropdownSource","includes","map","src","hasAny","length","then","opts","prev","catch","next","dataType","Date","toISOString","split","handleChange","value","handleDropdownOpen","looksLikeModuleSource","Promise","resolve","e","console","error","handleSubmit","preventDefault","newErrors","_appModulesCache","_appModulesCache$data","_matched$modules$find","user","JSON","parse","sessionStorage","getItem","username","enrichedData","formatDateToDDMMMYYYY","createdBy","modifiedBy","createdOn","getCurrentDateTime","modifiedOn","appModulesCache","data","matched","find","group","modules","some","m","sheetId","alert","log","tab","entry","reset","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","disabled","message","rowKey","undefined","options","onDropdownOpen","onChange","val","_c","$RefreshReg$"],"sources":["/Users/abhilash/Downloads/jp-internal-app/src/DynamicFormRenderer.js"],"sourcesContent":["// src/DynamicFormRenderer.js\nimport React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport FormField from './components/FormField';\nimport Loader from './components/Loader';\nimport * as dateUtils from './utils/dateUtils';\nimport { validateForm } from './utils/formValidation';\nimport { callBackend, fetchAppModules } from './utils/moduleStructureAPI';\nimport { getOptionsFromModuleSource } from './utils/dropdownProvider';\n\nfunction DynamicFormRenderer({ config, dropdowns, module }) {\n  // ---- never return before hooks ----\n  const isValidConfig = Array.isArray(config);\n\n  // Derived lists (defensive fallback to [])\nconst visibleFields = useMemo(\n    () => (Array.isArray(config) ? config.filter(f => f && f.key) : []),\n    [config]\n  );\n\n  const groupedFields = useMemo(() => {\n    const groups = {};\n    for (const field of visibleFields) {\n      const row = field.formRow || 0;\n      if (!groups[row]) groups[row] = [];\n      groups[row].push(field);\n    }\n    Object.keys(groups).forEach(rk => {\n      groups[rk].sort(\n        (a, b) => (Number(a.formColumn) || 0) - (Number(b.formColumn) || 0)\n      );\n    });\n    return groups;\n  }, [visibleFields]);\n\n  const sortedRowKeys = useMemo(\n    () => Object.keys(groupedFields).sort((a, b) => Number(a) - Number(b)),\n    [groupedFields]\n  );\n\n  // Local state\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Dropdown state\n  const [dropdownOptions, setDropdownOptions] = useState(dropdowns || {});\n\n  useEffect(() => {\n    setDropdownOptions(dropdowns || {});\n  }, [dropdowns]);\n\n  // Preload module-based dropdowns once per config change\n  useEffect(() => {\n    const sources = visibleFields\n      .filter(f => f.inputType === 'dropdown' && f.dropdownSource && f.dropdownSource.includes('.'))\n      .map(f => ({ key: f.key, src: f.dropdownSource }));\n\n    sources.forEach(({ key, src }) => {\n      const hasAny = Array.isArray(dropdownOptions[key]) && dropdownOptions[key].length > 0;\n      if (hasAny) return;\n      getOptionsFromModuleSource(src)\n        .then(opts => setDropdownOptions(prev => ({ ...prev, [key]: opts || [] })))\n        .catch(() => setDropdownOptions(prev => ({ ...prev, [key]: [] })));\n    });\n    // We intentionally only depend on visibleFields; dropdownOptions presence is checked per key\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [visibleFields]);\n\n  // Initialize defaults whenever visible fields change\n  useEffect(() => {\n    const next = {};\n    for (const field of visibleFields) {\n      next[field.key] =\n        field.dataType === 'date' ? new Date().toISOString().split('T')[0] : '';\n    }\n    setFormData(next);\n    setErrors({});\n  }, [visibleFields]);\n\n  const handleChange = useCallback((key, value) => {\n    setFormData(prev => ({ ...prev, [key]: value }));\n  }, []);\n\n  const handleDropdownOpen = useCallback(\n    (field) => {\n      const key = field.key;\n      const src = field?.dropdownSource || '';\n      const hasAny = Array.isArray(dropdownOptions[key]) && dropdownOptions[key].length > 0;\n      const looksLikeModuleSource = src.includes('.');\n\n      if (hasAny || !looksLikeModuleSource) {\n        return Promise.resolve(dropdownOptions[key] || []);\n      }\n\n      return getOptionsFromModuleSource(src)\n        .then(opts => {\n          setDropdownOptions(prev => ({ ...prev, [key]: opts || [] }));\n          return opts || [];\n        })\n        .catch(e => {\n          console.error(`Failed to fetch options for ${key} from ${src}`, e);\n          setDropdownOptions(prev => ({ ...prev, [key]: [] }));\n          return [];\n        });\n    },\n    [dropdownOptions]\n  );\n\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n\n    const newErrors = validateForm(module, visibleFields, formData);\n    setErrors(newErrors);\n    if (Object.keys(newErrors).length > 0) return;\n\n    setIsSubmitting(true);\n    try {\n      const user = JSON.parse(sessionStorage.getItem('user'));\n      const username = user?.username || 'Unknown';\n\n      const enrichedData = { ...formData };\n      for (const field of (Array.isArray(config) ? config : [])) {\n        if (field.dataType === 'date' && enrichedData[field.key]) {\n          enrichedData[field.key] = dateUtils.formatDateToDDMMMYYYY(enrichedData[field.key]);\n        }\n      }\n      enrichedData.createdBy = username;\n      enrichedData.modifiedBy = username;\n      enrichedData.createdOn = dateUtils.getCurrentDateTime();\n      enrichedData.modifiedOn = enrichedData.createdOn;\n\n      let appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      if (!appModulesCache || !appModulesCache.data) {\n        await fetchAppModules(true);\n        appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      }\n      const matched = appModulesCache?.data?.find(group =>\n        group.modules.some(m => m.module === module)\n      );\n      const sheetId = matched?.modules.find(m => m.module === module)?.sheetId;\n      if (!sheetId) {\n        console.error(`❌ No sheetId found for module ${module}`);\n        alert('Error: Unable to find sheetId for submission.');\n        return;\n      }\n\n      console.log('📤 Payload being sent to backend:', {\n        module, sheetId, tab: 'master', entry: enrichedData\n      });\n\n      await callBackend('saveLogEntry', { module, sheetId, tab: 'master', entry: enrichedData });\n\n      alert('✅ Form submitted!');\n      // reset\n      const reset = {};\n      for (const field of visibleFields) {\n        reset[field.key] = field.dataType === 'date'\n          ? new Date().toISOString().split('T')[0]\n          : '';\n      }\n      setFormData(reset);\n      setErrors({});\n    } catch (err) {\n      console.error('❌ Submission failed:', err);\n      alert('Failed to submit. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [config, formData, module, visibleFields]);\n\n  // ---- render fallback AFTER hooks have been called ----\n  if (!isValidConfig) {\n    console.error('❌ Invalid config passed to DynamicFormRenderer:', config);\n    return <div className=\"text-red-600\">Unable to load form configuration.</div>;\n  }\n\n return (\n   <div className=\"max-w-4xl mx-auto bg-white border rounded-lg shadow-sm\">\n     <form onSubmit={handleSubmit} className=\"jp-form-area p-6 space-y-6\" aria-busy={isSubmitting}>\n      <div className=\"jp-form-header shadow-md\">\n        <button type=\"submit\" className=\"btn-primary\" disabled={isSubmitting}>\n          {isSubmitting ? (\n            <span className=\"inline-flex items-center gap-2\">\n              <span className=\"animate-spin h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent\" />\n              Submitting…\n            </span>\n          ) : 'Submit'}\n        </button>\n      </div>\n\n      {isSubmitting && (\n        <div className=\"fixed inset-0 bg-black/10 backdrop-blur-[1px] z-50 flex items-center justify-center\">\n          <Loader message=\"dataBeingSubmitted\" />\n        </div>\n      )}\n\n      <fieldset disabled={isSubmitting} className=\"space-y-6\">\n        {sortedRowKeys.map((rowKey) => (\n          <div key={rowKey} className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {groupedFields[rowKey].map((field) => (\n              <FormField\n                key={field.key}\n                field={field}\n                value={formData[field.key] !== undefined ? formData[field.key] : ''}\n                error={errors[field.key]}\n                options={dropdownOptions[field.key] || []}\n                onDropdownOpen={() => handleDropdownOpen(field)}\n                onChange={(val) => handleChange(field.key, val)}\n              />\n            ))}\n          </div>\n        ))}\n      </fieldset>\n    </form>\n    </div>\n  );\n}\n\nexport default DynamicFormRenderer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// src/utils/moduleStructureAPI.js\n\nconst web_app_id = \"AKfycbw6hmM3eAXn36NgrHdfpQ33o6iWeldK3GAPATueQ_GdwFThrBKAV2PdGr_iJBNwWUCUdw\";\nconst WEB_APP_URL = `https://script.google.com/macros/s/${web_app_id}/exec`;\nasync function callBackend(action, payload = {}) {\n  const body = {\n    action,\n    ...payload\n  };\n  const res = await fetch(WEB_APP_URL, {\n    method: 'POST',\n    body: JSON.stringify(body),\n    headers: {\n      'Content-Type': 'text/plain;charset=utf-8'\n    }\n  });\n  if (!res.ok) {\n    const errText = await res.text();\n    throw new Error(`Error ${action}: ${res.status} ${res.statusText} - ${errText}`);\n  }\n  return await res.json();\n}\nexport async function fetchAppModules(forceClear = false) {\n  const cacheKey = 'appModulesCache';\n\n  // Clear cache if forceClear is true\n  if (forceClear) {\n    sessionStorage.removeItem(cacheKey);\n  }\n  const cached = JSON.parse(sessionStorage.getItem(cacheKey));\n  const expired = !cached || Date.now() - cached.timestamp > 3600000;\n  if (cached && !expired) return cached.data;\n  const data = await callBackend('getAppModules', null, {\n    force: forceClear\n  });\n  sessionStorage.setItem(cacheKey, JSON.stringify({\n    data,\n    timestamp: Date.now()\n  }));\n  return data;\n}\nexport { callBackend };","map":{"version":3,"names":["web_app_id","WEB_APP_URL","callBackend","action","payload","body","res","fetch","method","JSON","stringify","headers","ok","errText","text","Error","status","statusText","json","fetchAppModules","forceClear","cacheKey","sessionStorage","removeItem","cached","parse","getItem","expired","Date","now","timestamp","data","force","setItem"],"sources":["/Users/abhilash/Downloads/jp-internal-app/src/utils/moduleStructureAPI.js"],"sourcesContent":["// src/utils/moduleStructureAPI.js\n\nconst web_app_id = \"AKfycbw6hmM3eAXn36NgrHdfpQ33o6iWeldK3GAPATueQ_GdwFThrBKAV2PdGr_iJBNwWUCUdw\";\nconst WEB_APP_URL = `https://script.google.com/macros/s/${web_app_id}/exec`;\n\nasync function callBackend(action, payload= {}) {\n  const body = { action, ...payload };\n\n  const res = await fetch(WEB_APP_URL, {\n    method: 'POST',\n    body: JSON.stringify(body),\n    headers: { 'Content-Type': 'text/plain;charset=utf-8' },\n  });\n\n  if (!res.ok) {\n    const errText = await res.text();\n    throw new Error(`Error ${action}: ${res.status} ${res.statusText} - ${errText}`);\n  }\n\n  return await res.json();\n}\n\nexport async function fetchAppModules(forceClear = false) {\n  const cacheKey = 'appModulesCache';\n  \n  // Clear cache if forceClear is true\n  if (forceClear) {\n    sessionStorage.removeItem(cacheKey);\n  }\n  \n  const cached = JSON.parse(sessionStorage.getItem(cacheKey));\n  const expired = !cached || Date.now() - cached.timestamp > 3600000;\n\n  if (cached && !expired) return cached.data;\n\n  const data = await callBackend('getAppModules', null, { force: forceClear });\n  sessionStorage.setItem(cacheKey, JSON.stringify({ data, timestamp: Date.now() }));\n  return data;\n}\n\nexport { callBackend };\n"],"mappings":"AAAA;;AAEA,MAAMA,UAAU,GAAG,4EAA4E;AAC/F,MAAMC,WAAW,GAAG,sCAAsCD,UAAU,OAAO;AAE3E,eAAeE,WAAWA,CAACC,MAAM,EAAEC,OAAO,GAAE,CAAC,CAAC,EAAE;EAC9C,MAAMC,IAAI,GAAG;IAAEF,MAAM;IAAE,GAAGC;EAAQ,CAAC;EAEnC,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACN,WAAW,EAAE;IACnCO,MAAM,EAAE,MAAM;IACdH,IAAI,EAAEI,IAAI,CAACC,SAAS,CAACL,IAAI,CAAC;IAC1BM,OAAO,EAAE;MAAE,cAAc,EAAE;IAA2B;EACxD,CAAC,CAAC;EAEF,IAAI,CAACL,GAAG,CAACM,EAAE,EAAE;IACX,MAAMC,OAAO,GAAG,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC;IAChC,MAAM,IAAIC,KAAK,CAAC,SAASZ,MAAM,KAAKG,GAAG,CAACU,MAAM,IAAIV,GAAG,CAACW,UAAU,MAAMJ,OAAO,EAAE,CAAC;EAClF;EAEA,OAAO,MAAMP,GAAG,CAACY,IAAI,CAAC,CAAC;AACzB;AAEA,OAAO,eAAeC,eAAeA,CAACC,UAAU,GAAG,KAAK,EAAE;EACxD,MAAMC,QAAQ,GAAG,iBAAiB;;EAElC;EACA,IAAID,UAAU,EAAE;IACdE,cAAc,CAACC,UAAU,CAACF,QAAQ,CAAC;EACrC;EAEA,MAAMG,MAAM,GAAGf,IAAI,CAACgB,KAAK,CAACH,cAAc,CAACI,OAAO,CAACL,QAAQ,CAAC,CAAC;EAC3D,MAAMM,OAAO,GAAG,CAACH,MAAM,IAAII,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGL,MAAM,CAACM,SAAS,GAAG,OAAO;EAElE,IAAIN,MAAM,IAAI,CAACG,OAAO,EAAE,OAAOH,MAAM,CAACO,IAAI;EAE1C,MAAMA,IAAI,GAAG,MAAM7B,WAAW,CAAC,eAAe,EAAE,IAAI,EAAE;IAAE8B,KAAK,EAAEZ;EAAW,CAAC,CAAC;EAC5EE,cAAc,CAACW,OAAO,CAACZ,QAAQ,EAAEZ,IAAI,CAACC,SAAS,CAAC;IAAEqB,IAAI;IAAED,SAAS,EAAEF,IAAI,CAACC,GAAG,CAAC;EAAE,CAAC,CAAC,CAAC;EACjF,OAAOE,IAAI;AACb;AAEA,SAAS7B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
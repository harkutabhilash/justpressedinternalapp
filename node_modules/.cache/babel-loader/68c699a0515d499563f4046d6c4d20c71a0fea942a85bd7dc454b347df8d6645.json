{"ast":null,"code":"var _jsxFileName = \"/Users/abhilash/Downloads/jp-internal-app/src/ModuleManagement.js\",\n  _s = $RefreshSig$();\n// src/ModuleManagement.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { fetchMasterData } from './utils/moduleMasterAPI'; // returns the full dump for a module\nimport { paginate } from './utils/paginate';\nimport Loader from './components/Loader';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ModuleManagement({\n  module\n}) {\n  _s();\n  const [dump, setDump] = useState({\n    headers: [],\n    rows: [],\n    totalRecords: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n\n  // client-side pagination\n  const [page, setPage] = useState(1);\n  const [limit] = useState(50);\n\n  // fetch once per module (from session cache if present)\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      if (!module) return;\n      setLoading(true);\n      setMessage('');\n      setPage(1); // reset page when module changes\n      try {\n        var _res$rows;\n        const t0 = performance.now();\n        const res = await fetchMasterData(module); // { headers, rows, totalRecords }\n        if (cancelled) return;\n        setDump(res || {\n          headers: [],\n          rows: [],\n          totalRecords: 0\n        });\n        if (!(res !== null && res !== void 0 && (_res$rows = res.rows) !== null && _res$rows !== void 0 && _res$rows.length)) {\n          setMessage(`No records to fetch, please add data to ${module}`);\n        }\n        const t1 = performance.now();\n        console.log(`⏱ ${module} dump fetched in ${(t1 - t0).toFixed(1)} ms`);\n      } catch (err) {\n        console.error(`Failed to load ${module} data:`, err);\n        if (!cancelled) setMessage('Failed to load data.');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [module]);\n\n  // compute current page slice on the fly\n  const {\n    slice: pageRows,\n    pages\n  } = useMemo(() => paginate(dump.rows || [], page, limit), [dump.rows, page, limit]);\n\n  // pick headers to render (fallback to keys of first row if headers empty)\n  const headers = useMemo(() => {\n    var _dump$headers, _dump$rows;\n    if ((_dump$headers = dump.headers) !== null && _dump$headers !== void 0 && _dump$headers.length) return dump.headers;\n    return (_dump$rows = dump.rows) !== null && _dump$rows !== void 0 && _dump$rows[0] ? Object.keys(dump.rows[0]) : [];\n  }, [dump.headers, dump.rows]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"content-panel\",\n    children: loading ? /*#__PURE__*/_jsxDEV(Loader, {\n      message: `Relax, fetching ${module} data...`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this) : message ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-600\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table-auto-width\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"table-header-bg\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: headers.map(h => /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"table-header-text\",\n                children: h\n              }, h, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"table-body-bg\",\n            children: pageRows.map((row, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"table-row-border\",\n              children: headers.map(h => /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"table-cell-text\",\n                children: row[h]\n              }, h, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 23\n              }, this))\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), pages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary\",\n          onClick: () => setPage(p => Math.max(p - 1, 1)),\n          disabled: page === 1,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm font-medium\",\n          children: [\"Page \", page, \" of \", pages, \" \\u2022 \", dump.totalRecords, \" total\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-secondary\",\n          onClick: () => setPage(p => Math.min(p + 1, pages)),\n          disabled: page === pages,\n          children: \"Next\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(ModuleManagement, \"zUSA6vYtHULhntx2hgxZcg3++Kk=\");\n_c = ModuleManagement;\nexport default ModuleManagement;\nvar _c;\n$RefreshReg$(_c, \"ModuleManagement\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","fetchMasterData","paginate","Loader","jsxDEV","_jsxDEV","Fragment","_Fragment","ModuleManagement","module","_s","dump","setDump","headers","rows","totalRecords","loading","setLoading","message","setMessage","page","setPage","limit","cancelled","load","_res$rows","t0","performance","now","res","length","t1","console","log","toFixed","err","error","slice","pageRows","pages","_dump$headers","_dump$rows","Object","keys","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","h","row","idx","onClick","p","Math","max","disabled","min","_c","$RefreshReg$"],"sources":["/Users/abhilash/Downloads/jp-internal-app/src/ModuleManagement.js"],"sourcesContent":["// src/ModuleManagement.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { fetchMasterData } from './utils/moduleMasterAPI'; // returns the full dump for a module\nimport { paginate } from './utils/paginate';\nimport Loader from './components/Loader';\n\nfunction ModuleManagement({ module }) {\n  const [dump, setDump] = useState({ headers: [], rows: [], totalRecords: 0 });\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n\n  // client-side pagination\n  const [page, setPage] = useState(1);\n  const [limit] = useState(50);\n\n  // fetch once per module (from session cache if present)\n  useEffect(() => {\n    let cancelled = false;\n\n    async function load() {\n      if (!module) return;\n      setLoading(true);\n      setMessage('');\n      setPage(1); // reset page when module changes\n      try {\n        const t0 = performance.now();\n        const res = await fetchMasterData(module); // { headers, rows, totalRecords }\n        if (cancelled) return;\n        setDump(res || { headers: [], rows: [], totalRecords: 0 });\n        if (!res?.rows?.length) {\n          setMessage(`No records to fetch, please add data to ${module}`);\n        }\n        const t1 = performance.now();\n        console.log(`⏱ ${module} dump fetched in ${(t1 - t0).toFixed(1)} ms`);\n      } catch (err) {\n        console.error(`Failed to load ${module} data:`, err);\n        if (!cancelled) setMessage('Failed to load data.');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n\n    load();\n    return () => { cancelled = true; };\n  }, [module]);\n\n  // compute current page slice on the fly\n  const { slice: pageRows, pages } = useMemo(\n    () => paginate(dump.rows || [], page, limit),\n    [dump.rows, page, limit]\n  );\n\n  // pick headers to render (fallback to keys of first row if headers empty)\n  const headers = useMemo(() => {\n    if (dump.headers?.length) return dump.headers;\n    return dump.rows?.[0] ? Object.keys(dump.rows[0]) : [];\n  }, [dump.headers, dump.rows]);\n\n  return (\n    <div className=\"content-panel\">\n      {loading ? (\n        <Loader message={`Relax, fetching ${module} data...`} />\n      ) : message ? (\n        <p className=\"text-center text-gray-600\">{message}</p>\n      ) : (\n        <>\n          <div className=\"table-wrapper\">\n            <table className=\"table-auto-width\">\n              <thead className=\"table-header-bg\">\n                <tr>\n                  {headers.map(h => (\n                    <th key={h} className=\"table-header-text\">{h}</th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody className=\"table-body-bg\">\n                {pageRows.map((row, idx) => (\n                  <tr key={idx} className=\"table-row-border\">\n                    {headers.map(h => (\n                      <td key={h} className=\"table-cell-text\">\n                        {row[h]}\n                      </td>\n                    ))}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {/* Pagination controls */}\n          {pages > 1 && (\n            <div className=\"flex justify-between items-center mt-4\">\n              <button\n                className=\"btn-secondary\"\n                onClick={() => setPage(p => Math.max(p - 1, 1))}\n                disabled={page === 1}\n              >\n                Previous\n              </button>\n\n              <span className=\"text-sm font-medium\">\n                Page {page} of {pages} • {dump.totalRecords} total\n              </span>\n\n              <button\n                className=\"btn-secondary\"\n                onClick={() => setPage(p => Math.min(p + 1, pages))}\n                disabled={page === pages}\n              >\n                Next\n              </button>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default ModuleManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/abhilash/Downloads/jp-internal-app/src/DynamicFormRenderer.js\",\n  _s = $RefreshSig$();\n// src/DynamicFormRenderer.js\nimport React, { useEffect, useState } from 'react';\nimport FormField from './components/FormField';\nimport Loader from './components/Loader';\nimport * as dateUtils from './utils/dateUtils.js';\nimport { validateForm } from './utils/formValidation';\nimport { callBackend, fetchAppModules } from './utils/moduleStructureAPI';\nimport { getOptionsFromModuleSource } from './utils/dropdownProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DynamicFormRenderer({\n  config,\n  dropdowns,\n  module\n}) {\n  _s();\n  if (!Array.isArray(config)) {\n    console.error(`❌ Invalid config passed to DynamicFormRenderer:`, config);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-600\",\n      children: \"Unable to load form configuration.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Only fields marked visible\n  const visibleFields = config.filter(f => !!f.showInApp);\n\n  // Group fields by formRow\n  const groupedFields = {};\n  visibleFields.forEach(field => {\n    const row = field.formRow || 0;\n    if (!groupedFields[row]) groupedFields[row] = [];\n    groupedFields[row].push(field);\n  });\n  const sortedRowKeys = Object.keys(groupedFields).sort((a, b) => Number(a) - Number(b));\n\n  // Initial state (dates default to yyyy-mm-dd)\n  const initialState = visibleFields.reduce((acc, field) => {\n    acc[field.key] = field.dataType === 'date' ? new Date().toISOString().split('T')[0] : '';\n    return acc;\n  }, {});\n  const [formData, setFormData] = useState(initialState);\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Runtime dropdowns for module-sourced options (e.g., \"product.skuId\")\n  const [runtimeDropdowns, setRuntimeDropdowns] = useState({}); // { [key]: string[] }\n  const [loadingDD, setLoadingDD] = useState({}); // { [key]: boolean }\n\n  // Resolve module-based dropdowns on mount/config change\n  useEffect(() => {\n    let alive = true;\n    async function ensureOptions(field) {\n      var _runtimeDropdowns$fie;\n      if (field.inputType !== 'dropdown') return;\n      const src = field.dropdownSource;\n      if (!src || src === 'sheet') return; // BE-provided dropdowns\n      if (!src.includes('.')) return; // not a module.prop pattern\n      if ((_runtimeDropdowns$fie = runtimeDropdowns[field.key]) !== null && _runtimeDropdowns$fie !== void 0 && _runtimeDropdowns$fie.length) return; // already loaded\n\n      setLoadingDD(prev => ({\n        ...prev,\n        [field.key]: true\n      }));\n      try {\n        const opts = await getOptionsFromModuleSource(src);\n        if (!alive) return;\n        setRuntimeDropdowns(prev => ({\n          ...prev,\n          [field.key]: opts\n        }));\n      } catch (e) {\n        console.error(`Failed to load dropdown for ${field.key} from ${src}:`, e);\n        if (!alive) return;\n        setRuntimeDropdowns(prev => ({\n          ...prev,\n          [field.key]: []\n        }));\n      } finally {\n        if (alive) setLoadingDD(prev => ({\n          ...prev,\n          [field.key]: false\n        }));\n      }\n    }\n    visibleFields.forEach(ensureOptions);\n    return () => {\n      alive = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(visibleFields)]);\n  const handleChange = (key, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Validate (common + module-specific)\n    const newErrors = validateForm(module, visibleFields, formData);\n    setErrors(newErrors);\n    if (Object.keys(newErrors).length > 0) return;\n    setIsSubmitting(true);\n    try {\n      var _appModulesCache, _appModulesCache$data, _matched$modules$find;\n      // Enrich with user + timestamps\n      const user = JSON.parse(sessionStorage.getItem('user'));\n      const username = (user === null || user === void 0 ? void 0 : user.username) || 'Unknown';\n      const enrichedData = {\n        ...formData\n      };\n      config.forEach(field => {\n        if (field.dataType === 'date' && enrichedData[field.key]) {\n          enrichedData[field.key] = dateUtils.formatDateToDDMMMYYYY(enrichedData[field.key]);\n        }\n      });\n      enrichedData.createdBy = username;\n      enrichedData.modifiedBy = username;\n      enrichedData.createdOn = dateUtils.getCurrentDateTime();\n      enrichedData.modifiedOn = enrichedData.createdOn;\n\n      // Find sheetId\n      let appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      if (!appModulesCache || !appModulesCache.data) {\n        await fetchAppModules(true);\n        appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      }\n      const matched = (_appModulesCache = appModulesCache) === null || _appModulesCache === void 0 ? void 0 : (_appModulesCache$data = _appModulesCache.data) === null || _appModulesCache$data === void 0 ? void 0 : _appModulesCache$data.find(group => group.modules.some(mod => mod.module === module));\n      const sheetId = matched === null || matched === void 0 ? void 0 : (_matched$modules$find = matched.modules.find(m => m.module === module)) === null || _matched$modules$find === void 0 ? void 0 : _matched$modules$find.sheetId;\n      if (!sheetId) {\n        console.error(`❌ No sheetId found for module ${module}`);\n        alert('Error: Unable to find sheetId for submission.');\n        return;\n      }\n\n      // Submit\n      console.log('📤 Payload being sent to backend:', {\n        module,\n        sheetId,\n        tab: 'master',\n        entry: enrichedData\n      });\n      await callBackend('saveLogEntry', {\n        module,\n        sheetId,\n        tab: 'master',\n        entry: enrichedData\n      });\n      alert('✅ Form submitted!');\n      setFormData(initialState);\n      setErrors({});\n    } catch (err) {\n      console.error('❌ Submission failed:', err);\n      alert('Failed to submit. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jp-form-area space-y-6\",\n    \"aria-busy\": isSubmitting,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jp-form-header shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn-primary\",\n        disabled: isSubmitting,\n        children: isSubmitting ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"animate-spin h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), \"Submitting\\u2026\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this) : 'Submit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), isSubmitting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/10 backdrop-blur-[1px] z-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        message: \"dataBeingSubmitted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      disabled: isSubmitting,\n      className: \"space-y-6\",\n      children: sortedRowKeys.map(rowKey => {\n        const rowFields = groupedFields[rowKey].sort((a, b) => (Number(a.formColumn) || 0) - (Number(b.formColumn) || 0));\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n          children: rowFields.map(field => {\n            // Decide dropdown options\n            let options = [];\n            let loadingOptions = false;\n            if (field.inputType === 'dropdown') {\n              var _field$dropdownSource;\n              if (field.dropdownSource === 'sheet') {\n                // From BE dropdowns tab\n                options = dropdowns[field.key] || [];\n              } else if ((_field$dropdownSource = field.dropdownSource) !== null && _field$dropdownSource !== void 0 && _field$dropdownSource.includes('.')) {\n                // From master module dump\n                options = runtimeDropdowns[field.key] || [];\n                loadingOptions = !!loadingDD[field.key];\n              }\n            }\n            return /*#__PURE__*/_jsxDEV(FormField, {\n              field: field,\n              value: formData[field.key],\n              error: errors[field.key],\n              options: options,\n              onRequestOptions: f => getOptionsFromModuleSource(f === null || f === void 0 ? void 0 : f.dropdownSource),\n              onChange: val => handleChange(field.key, val)\n            }, field.key, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 19\n            }, this);\n          })\n        }, rowKey, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n}\n_s(DynamicFormRenderer, \"3M7RB8m9BDqerrpCZEMEd01wu1M=\");\n_c = DynamicFormRenderer;\nexport default DynamicFormRenderer;\nvar _c;\n$RefreshReg$(_c, \"DynamicFormRenderer\");","map":{"version":3,"names":["React","useEffect","useState","FormField","Loader","dateUtils","validateForm","callBackend","fetchAppModules","getOptionsFromModuleSource","jsxDEV","_jsxDEV","DynamicFormRenderer","config","dropdowns","module","_s","Array","isArray","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","visibleFields","filter","f","showInApp","groupedFields","forEach","field","row","formRow","push","sortedRowKeys","Object","keys","sort","a","b","Number","initialState","reduce","acc","key","dataType","Date","toISOString","split","formData","setFormData","errors","setErrors","isSubmitting","setIsSubmitting","runtimeDropdowns","setRuntimeDropdowns","loadingDD","setLoadingDD","alive","ensureOptions","_runtimeDropdowns$fie","inputType","src","dropdownSource","includes","length","prev","opts","e","JSON","stringify","handleChange","value","handleSubmit","preventDefault","newErrors","_appModulesCache","_appModulesCache$data","_matched$modules$find","user","parse","sessionStorage","getItem","username","enrichedData","formatDateToDDMMMYYYY","createdBy","modifiedBy","createdOn","getCurrentDateTime","modifiedOn","appModulesCache","data","matched","find","group","modules","some","mod","sheetId","m","alert","log","tab","entry","err","onSubmit","type","disabled","message","map","rowKey","rowFields","formColumn","options","loadingOptions","_field$dropdownSource","onRequestOptions","onChange","val","_c","$RefreshReg$"],"sources":["/Users/abhilash/Downloads/jp-internal-app/src/DynamicFormRenderer.js"],"sourcesContent":["// src/DynamicFormRenderer.js\nimport React, { useEffect, useState } from 'react';\nimport FormField from './components/FormField';\nimport Loader from './components/Loader';\nimport * as dateUtils from './utils/dateUtils.js';\nimport { validateForm } from './utils/formValidation';\nimport { callBackend, fetchAppModules } from './utils/moduleStructureAPI';\nimport { getOptionsFromModuleSource } from './utils/dropdownProvider';\n\nfunction DynamicFormRenderer({ config, dropdowns, module }) {\n  if (!Array.isArray(config)) {\n    console.error(`❌ Invalid config passed to DynamicFormRenderer:`, config);\n    return <div className=\"text-red-600\">Unable to load form configuration.</div>;\n  }\n\n  // Only fields marked visible\n  const visibleFields = config.filter(f => !!f.showInApp);\n\n  // Group fields by formRow\n  const groupedFields = {};\n  visibleFields.forEach(field => {\n    const row = field.formRow || 0;\n    if (!groupedFields[row]) groupedFields[row] = [];\n    groupedFields[row].push(field);\n  });\n  const sortedRowKeys = Object.keys(groupedFields).sort((a, b) => Number(a) - Number(b));\n\n  // Initial state (dates default to yyyy-mm-dd)\n  const initialState = visibleFields.reduce((acc, field) => {\n    acc[field.key] = field.dataType === 'date'\n      ? new Date().toISOString().split('T')[0]\n      : '';\n    return acc;\n  }, {});\n\n  const [formData, setFormData] = useState(initialState);\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Runtime dropdowns for module-sourced options (e.g., \"product.skuId\")\n  const [runtimeDropdowns, setRuntimeDropdowns] = useState({}); // { [key]: string[] }\n  const [loadingDD, setLoadingDD] = useState({});               // { [key]: boolean }\n\n  // Resolve module-based dropdowns on mount/config change\n  useEffect(() => {\n    let alive = true;\n\n    async function ensureOptions(field) {\n      if (field.inputType !== 'dropdown') return;\n\n      const src = field.dropdownSource;\n      if (!src || src === 'sheet') return;         // BE-provided dropdowns\n      if (!src.includes('.')) return;              // not a module.prop pattern\n      if (runtimeDropdowns[field.key]?.length) return; // already loaded\n\n      setLoadingDD(prev => ({ ...prev, [field.key]: true }));\n      try {\n        const opts = await getOptionsFromModuleSource(src);\n        if (!alive) return;\n        setRuntimeDropdowns(prev => ({ ...prev, [field.key]: opts }));\n      } catch (e) {\n        console.error(`Failed to load dropdown for ${field.key} from ${src}:`, e);\n        if (!alive) return;\n        setRuntimeDropdowns(prev => ({ ...prev, [field.key]: [] }));\n      } finally {\n        if (alive) setLoadingDD(prev => ({ ...prev, [field.key]: false }));\n      }\n    }\n\n    visibleFields.forEach(ensureOptions);\n    return () => { alive = false; };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(visibleFields)]);\n\n  const handleChange = (key, value) => {\n    setFormData(prev => ({ ...prev, [key]: value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    // Validate (common + module-specific)\n    const newErrors = validateForm(module, visibleFields, formData);\n    setErrors(newErrors);\n    if (Object.keys(newErrors).length > 0) return;\n\n    setIsSubmitting(true);\n    try {\n      // Enrich with user + timestamps\n      const user = JSON.parse(sessionStorage.getItem('user'));\n      const username = user?.username || 'Unknown';\n\n      const enrichedData = { ...formData };\n      config.forEach(field => {\n        if (field.dataType === 'date' && enrichedData[field.key]) {\n          enrichedData[field.key] = dateUtils.formatDateToDDMMMYYYY(enrichedData[field.key]);\n        }\n      });\n      enrichedData.createdBy = username;\n      enrichedData.modifiedBy = username;\n      enrichedData.createdOn = dateUtils.getCurrentDateTime();\n      enrichedData.modifiedOn = enrichedData.createdOn;\n\n      // Find sheetId\n      let appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      if (!appModulesCache || !appModulesCache.data) {\n        await fetchAppModules(true);\n        appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      }\n      const matched = appModulesCache?.data?.find(group =>\n        group.modules.some(mod => mod.module === module)\n      );\n      const sheetId = matched?.modules.find(m => m.module === module)?.sheetId;\n      if (!sheetId) {\n        console.error(`❌ No sheetId found for module ${module}`);\n        alert('Error: Unable to find sheetId for submission.');\n        return;\n      }\n\n      // Submit\n      console.log('📤 Payload being sent to backend:', {\n        module, sheetId, tab: 'master', entry: enrichedData\n      });\n\n      await callBackend('saveLogEntry', {\n        module, sheetId, tab: 'master', entry: enrichedData\n      });\n\n      alert('✅ Form submitted!');\n      setFormData(initialState);\n      setErrors({});\n    } catch (err) {\n      console.error('❌ Submission failed:', err);\n      alert('Failed to submit. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"jp-form-area space-y-6\" aria-busy={isSubmitting}>\n      {/* Sticky Submit Button */}\n      <div className=\"jp-form-header shadow-md\">\n        <button type=\"submit\" className=\"btn-primary\" disabled={isSubmitting}>\n          {isSubmitting ? (\n            <span className=\"inline-flex items-center gap-2\">\n              <span className=\"animate-spin h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent\" />\n              Submitting…\n            </span>\n          ) : (\n            'Submit'\n          )}\n        </button>\n      </div>\n\n      {/* Blocking overlay while submitting */}\n      {isSubmitting && (\n        <div className=\"fixed inset-0 bg-black/10 backdrop-blur-[1px] z-50 flex items-center justify-center\">\n          <Loader message=\"dataBeingSubmitted\" />\n        </div>\n      )}\n\n      <fieldset disabled={isSubmitting} className=\"space-y-6\">\n        {sortedRowKeys.map(rowKey => {\n          const rowFields = groupedFields[rowKey].sort(\n            (a, b) => (Number(a.formColumn) || 0) - (Number(b.formColumn) || 0)\n          );\n\n          return (\n            <div key={rowKey} className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              {rowFields.map(field => {\n                // Decide dropdown options\n                let options = [];\n                let loadingOptions = false;\n\n                if (field.inputType === 'dropdown') {\n                  if (field.dropdownSource === 'sheet') {\n                    // From BE dropdowns tab\n                    options = dropdowns[field.key] || [];\n                  } else if (field.dropdownSource?.includes('.')) {\n                    // From master module dump\n                    options = runtimeDropdowns[field.key] || [];\n                    loadingOptions = !!loadingDD[field.key];\n                  }\n                }\n\n                return (\n                  <FormField\n                    key={field.key}\n                    field={field}\n                    value={formData[field.key]}\n                    error={errors[field.key]}\n                    options={options}\n                    onRequestOptions={(f) => getOptionsFromModuleSource(f?.dropdownSource)}\n                    onChange={(val) => handleChange(field.key, val)}\n                  />\n                );\n              })}\n            </div>\n          );\n        })}\n      </fieldset>\n    </form>\n  );\n}\n\nexport default DynamicFormRenderer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
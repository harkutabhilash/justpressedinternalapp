{"ast":null,"code":"var _jsxFileName = \"/Users/abhilash/Downloads/jp-internal-app/src/DynamicFormRenderer.js\",\n  _s = $RefreshSig$();\n// src/DynamicFormRenderer.js\nimport React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport FormField from './components/FormField';\nimport Loader from './components/Loader';\nimport * as dateUtils from './utils/dateUtils';\nimport { validateForm } from './utils/formValidation';\nimport { callBackend, fetchAppModules } from './utils/moduleStructureAPI';\nimport { getOptionsFromModuleSource } from './utils/dropdownProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DynamicFormRenderer({\n  config,\n  dropdowns,\n  module\n}) {\n  _s();\n  // Guard\n  const isValidConfig = Array.isArray(config);\n  if (!isValidConfig) {\n    console.error('‚ùå Invalid config passed to DynamicFormRenderer:', config);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-red-600\",\n      children: \"Unable to load form configuration.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 12\n    }, this);\n  }\n\n  // ---- Derived data (memoized) ----\n  const visibleFields = useMemo(() => config.filter(f => !!f.showInApp), [config]);\n  const groupedFields = useMemo(() => {\n    const groups = {};\n    for (const field of visibleFields) {\n      const row = field.formRow || 0;\n      if (!groups[row]) groups[row] = [];\n      groups[row].push(field);\n    }\n    // sort each row by formColumn\n    Object.keys(groups).forEach(rk => {\n      groups[rk].sort((a, b) => (Number(a.formColumn) || 0) - (Number(b.formColumn) || 0));\n    });\n    return groups;\n  }, [visibleFields]);\n  const sortedRowKeys = useMemo(() => Object.keys(groupedFields).sort((a, b) => Number(a) - Number(b)), [groupedFields]);\n\n  // ---- Local state ----\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // dropdown state comes from props, but we keep a local copy we can extend\n  const [dropdownOptions, setDropdownOptions] = useState(dropdowns || {});\n  const [dropdownLoading, setDropdownLoading] = useState({}); // { key: boolean }\n\n  // Keep local dropdown state in sync if parent changes\n  useEffect(() => {\n    setDropdownOptions(dropdowns || {});\n  }, [dropdowns]);\n\n  // Initialize/refresh form defaults whenever config changes\n  useEffect(() => {\n    const next = {};\n    for (const field of visibleFields) {\n      if (field.dataType === 'date') {\n        next[field.key] = new Date().toISOString().split('T')[0]; // yyyy-mm-dd\n      } else {\n        next[field.key] = '';\n      }\n    }\n    setFormData(next);\n    setErrors({});\n  }, [visibleFields]);\n\n  // ---- Handlers (stable via useCallback) ----\n  const handleChange = useCallback((key, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  }, []);\n\n  // Lazy-fetch dropdown options from master modules when user opens a dropdown\n  const handleDropdownOpen = useCallback(field => {\n    const key = field.key;\n    const src = (field === null || field === void 0 ? void 0 : field.dropdownSource) || '';\n    const hasAny = Array.isArray(dropdownOptions[key]) && dropdownOptions[key].length > 0;\n    const looksLikeModuleSource = src.includes('.');\n    if (hasAny || !looksLikeModuleSource) return Promise.resolve(dropdownOptions[key] || []);\n\n    // return the promise so FormField can await it\n    return getOptionsFromModuleSource(src).then(opts => {\n      setDropdownOptions(prev => ({\n        ...prev,\n        [key]: opts || []\n      }));\n      return opts || [];\n    }).catch(e => {\n      console.error(`Failed to fetch options for ${key} from ${src}`, e);\n      setDropdownOptions(prev => ({\n        ...prev,\n        [key]: []\n      }));\n      return [];\n    });\n  }, [dropdownOptions]);\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n\n    // 1) Validate (common + module-specific)\n    const newErrors = validateForm(module, visibleFields, formData);\n    setErrors(newErrors);\n    if (Object.keys(newErrors).length > 0) return;\n    setIsSubmitting(true);\n    try {\n      var _appModulesCache, _appModulesCache$data, _matched$modules$find;\n      // 2) Enrich data\n      const user = JSON.parse(sessionStorage.getItem('user'));\n      const username = (user === null || user === void 0 ? void 0 : user.username) || 'Unknown';\n      const enrichedData = {\n        ...formData\n      };\n      for (const field of config) {\n        if (field.dataType === 'date' && enrichedData[field.key]) {\n          enrichedData[field.key] = dateUtils.formatDateToDDMMMYYYY(enrichedData[field.key]);\n        }\n      }\n      enrichedData.createdBy = username;\n      enrichedData.modifiedBy = username;\n      enrichedData.createdOn = dateUtils.getCurrentDateTime();\n      enrichedData.modifiedOn = enrichedData.createdOn;\n\n      // 3) Find sheetId for this module\n      let appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      if (!appModulesCache || !appModulesCache.data) {\n        await fetchAppModules(true);\n        appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n      }\n      const matched = (_appModulesCache = appModulesCache) === null || _appModulesCache === void 0 ? void 0 : (_appModulesCache$data = _appModulesCache.data) === null || _appModulesCache$data === void 0 ? void 0 : _appModulesCache$data.find(group => group.modules.some(m => m.module === module));\n      const sheetId = matched === null || matched === void 0 ? void 0 : (_matched$modules$find = matched.modules.find(m => m.module === module)) === null || _matched$modules$find === void 0 ? void 0 : _matched$modules$find.sheetId;\n      if (!sheetId) {\n        console.error(`‚ùå No sheetId found for module ${module}`);\n        alert('Error: Unable to find sheetId for submission.');\n        return;\n      }\n\n      // 4) Submit\n      console.log('üì§ Payload being sent to backend:', {\n        module,\n        sheetId,\n        tab: 'master',\n        entry: enrichedData\n      });\n      await callBackend('saveLogEntry', {\n        module,\n        sheetId,\n        tab: 'master',\n        entry: enrichedData\n      });\n      alert('‚úÖ Form submitted!');\n      // Reset to defaults\n      const reset = {};\n      for (const field of visibleFields) {\n        reset[field.key] = field.dataType === 'date' ? new Date().toISOString().split('T')[0] : '';\n      }\n      setFormData(reset);\n      setErrors({});\n    } catch (err) {\n      console.error('‚ùå Submission failed:', err);\n      alert('Failed to submit. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [config, formData, module, visibleFields]);\n\n  // ---- Render ----\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jp-form-area space-y-6\",\n    \"aria-busy\": isSubmitting,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jp-form-header shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn-primary\",\n        disabled: isSubmitting,\n        children: isSubmitting ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"animate-spin h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 15\n          }, this), \"Submitting\\u2026\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }, this) : 'Submit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), isSubmitting && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black/10 backdrop-blur-[1px] z-50 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(Loader, {\n        message: \"dataBeingSubmitted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      disabled: isSubmitting,\n      className: \"space-y-6\",\n      children: sortedRowKeys.map(rowKey => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-4\",\n        children: groupedFields[rowKey].map(field => {\n          const opts = dropdownOptions[field.key] || [];\n          const loading = !!dropdownLoading[field.key];\n          return /*#__PURE__*/_jsxDEV(FormField, {\n            field: field,\n            value: formData[field.key],\n            error: errors[field.key],\n            options: opts\n            // Keep dropdown interactive; show \"Fetching‚Ä¶\" only when opened and missing\n            ,\n            onDropdownOpen: () => handleDropdownOpen(field),\n            loadingOptions: loading,\n            onChange: val => handleChange(field.key, val)\n          }, field.key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 17\n          }, this);\n        })\n      }, rowKey, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 5\n  }, this);\n}\n_s(DynamicFormRenderer, \"mVw8cj70mvZcd17ddM91c4xr3xw=\");\n_c = DynamicFormRenderer;\nexport default DynamicFormRenderer;\nvar _c;\n$RefreshReg$(_c, \"DynamicFormRenderer\");","map":{"version":3,"names":["React","useState","useMemo","useEffect","useCallback","FormField","Loader","dateUtils","validateForm","callBackend","fetchAppModules","getOptionsFromModuleSource","jsxDEV","_jsxDEV","DynamicFormRenderer","config","dropdowns","module","_s","isValidConfig","Array","isArray","console","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","visibleFields","filter","f","showInApp","groupedFields","groups","field","row","formRow","push","Object","keys","forEach","rk","sort","a","b","Number","formColumn","sortedRowKeys","formData","setFormData","errors","setErrors","isSubmitting","setIsSubmitting","dropdownOptions","setDropdownOptions","dropdownLoading","setDropdownLoading","next","dataType","key","Date","toISOString","split","handleChange","value","prev","handleDropdownOpen","src","dropdownSource","hasAny","length","looksLikeModuleSource","includes","Promise","resolve","then","opts","catch","e","handleSubmit","preventDefault","newErrors","_appModulesCache","_appModulesCache$data","_matched$modules$find","user","JSON","parse","sessionStorage","getItem","username","enrichedData","formatDateToDDMMMYYYY","createdBy","modifiedBy","createdOn","getCurrentDateTime","modifiedOn","appModulesCache","data","matched","find","group","modules","some","m","sheetId","alert","log","tab","entry","reset","err","onSubmit","type","disabled","message","map","rowKey","loading","options","onDropdownOpen","loadingOptions","onChange","val","_c","$RefreshReg$"],"sources":["/Users/abhilash/Downloads/jp-internal-app/src/DynamicFormRenderer.js"],"sourcesContent":["// src/DynamicFormRenderer.js\nimport React, { useState, useMemo, useEffect, useCallback } from 'react';\nimport FormField from './components/FormField';\nimport Loader from './components/Loader';\nimport * as dateUtils from './utils/dateUtils';\nimport { validateForm } from './utils/formValidation';\nimport { callBackend, fetchAppModules } from './utils/moduleStructureAPI';\nimport { getOptionsFromModuleSource } from './utils/dropdownProvider';\n\nfunction DynamicFormRenderer({ config, dropdowns, module }) {\n  // Guard\n  const isValidConfig = Array.isArray(config);\n  if (!isValidConfig) {\n    console.error('‚ùå Invalid config passed to DynamicFormRenderer:', config);\n    return <div className=\"text-red-600\">Unable to load form configuration.</div>;\n  }\n\n  // ---- Derived data (memoized) ----\n  const visibleFields = useMemo(\n    () => config.filter((f) => !!f.showInApp),\n    [config]\n  );\n\n  const groupedFields = useMemo(() => {\n    const groups = {};\n    for (const field of visibleFields) {\n      const row = field.formRow || 0;\n      if (!groups[row]) groups[row] = [];\n      groups[row].push(field);\n    }\n    // sort each row by formColumn\n    Object.keys(groups).forEach((rk) => {\n      groups[rk].sort(\n        (a, b) => (Number(a.formColumn) || 0) - (Number(b.formColumn) || 0)\n      );\n    });\n    return groups;\n  }, [visibleFields]);\n\n  const sortedRowKeys = useMemo(\n    () => Object.keys(groupedFields).sort((a, b) => Number(a) - Number(b)),\n    [groupedFields]\n  );\n\n  // ---- Local state ----\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // dropdown state comes from props, but we keep a local copy we can extend\n  const [dropdownOptions, setDropdownOptions] = useState(dropdowns || {});\n  const [dropdownLoading, setDropdownLoading] = useState({}); // { key: boolean }\n\n  // Keep local dropdown state in sync if parent changes\n  useEffect(() => {\n    setDropdownOptions(dropdowns || {});\n  }, [dropdowns]);\n\n  // Initialize/refresh form defaults whenever config changes\n  useEffect(() => {\n    const next = {};\n    for (const field of visibleFields) {\n      if (field.dataType === 'date') {\n        next[field.key] = new Date().toISOString().split('T')[0]; // yyyy-mm-dd\n      } else {\n        next[field.key] = '';\n      }\n    }\n    setFormData(next);\n    setErrors({});\n  }, [visibleFields]);\n\n  // ---- Handlers (stable via useCallback) ----\n  const handleChange = useCallback((key, value) => {\n    setFormData((prev) => ({ ...prev, [key]: value }));\n  }, []);\n\n  // Lazy-fetch dropdown options from master modules when user opens a dropdown\n const handleDropdownOpen = useCallback(\n  (field) => {\n    const key = field.key;\n    const src = field?.dropdownSource || '';\n    const hasAny = Array.isArray(dropdownOptions[key]) && dropdownOptions[key].length > 0;\n    const looksLikeModuleSource = src.includes('.');\n\n    if (hasAny || !looksLikeModuleSource) return Promise.resolve(dropdownOptions[key] || []);\n\n    // return the promise so FormField can await it\n    return getOptionsFromModuleSource(src)\n      .then((opts) => {\n        setDropdownOptions((prev) => ({ ...prev, [key]: opts || [] }));\n        return opts || [];\n      })\n      .catch((e) => {\n        console.error(`Failed to fetch options for ${key} from ${src}`, e);\n        setDropdownOptions((prev) => ({ ...prev, [key]: [] }));\n        return [];\n      });\n  },\n  [dropdownOptions]\n);\n\n  const handleSubmit = useCallback(\n    async (e) => {\n      e.preventDefault();\n\n      // 1) Validate (common + module-specific)\n      const newErrors = validateForm(module, visibleFields, formData);\n      setErrors(newErrors);\n      if (Object.keys(newErrors).length > 0) return;\n\n      setIsSubmitting(true);\n      try {\n        // 2) Enrich data\n        const user = JSON.parse(sessionStorage.getItem('user'));\n        const username = user?.username || 'Unknown';\n\n        const enrichedData = { ...formData };\n        for (const field of config) {\n          if (field.dataType === 'date' && enrichedData[field.key]) {\n            enrichedData[field.key] = dateUtils.formatDateToDDMMMYYYY(\n              enrichedData[field.key]\n            );\n          }\n        }\n        enrichedData.createdBy = username;\n        enrichedData.modifiedBy = username;\n        enrichedData.createdOn = dateUtils.getCurrentDateTime();\n        enrichedData.modifiedOn = enrichedData.createdOn;\n\n        // 3) Find sheetId for this module\n        let appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n        if (!appModulesCache || !appModulesCache.data) {\n          await fetchAppModules(true);\n          appModulesCache = JSON.parse(sessionStorage.getItem('appModulesCache'));\n        }\n        const matched = appModulesCache?.data?.find((group) =>\n          group.modules.some((m) => m.module === module)\n        );\n        const sheetId = matched?.modules.find((m) => m.module === module)?.sheetId;\n        if (!sheetId) {\n          console.error(`‚ùå No sheetId found for module ${module}`);\n          alert('Error: Unable to find sheetId for submission.');\n          return;\n        }\n\n        // 4) Submit\n        console.log('üì§ Payload being sent to backend:', {\n          module,\n          sheetId,\n          tab: 'master',\n          entry: enrichedData,\n        });\n\n        await callBackend('saveLogEntry', {\n          module,\n          sheetId,\n          tab: 'master',\n          entry: enrichedData,\n        });\n\n        alert('‚úÖ Form submitted!');\n        // Reset to defaults\n        const reset = {};\n        for (const field of visibleFields) {\n          reset[field.key] =\n            field.dataType === 'date'\n              ? new Date().toISOString().split('T')[0]\n              : '';\n        }\n        setFormData(reset);\n        setErrors({});\n      } catch (err) {\n        console.error('‚ùå Submission failed:', err);\n        alert('Failed to submit. Please try again.');\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [config, formData, module, visibleFields]\n  );\n\n  // ---- Render ----\n  return (\n    <form onSubmit={handleSubmit} className=\"jp-form-area space-y-6\" aria-busy={isSubmitting}>\n      {/* Sticky Submit Button */}\n      <div className=\"jp-form-header shadow-md\">\n        <button type=\"submit\" className=\"btn-primary\" disabled={isSubmitting}>\n          {isSubmitting ? (\n            <span className=\"inline-flex items-center gap-2\">\n              <span className=\"animate-spin h-4 w-4 rounded-full border-2 border-gray-300 border-t-transparent\" />\n              Submitting‚Ä¶\n            </span>\n          ) : (\n            'Submit'\n          )}\n        </button>\n      </div>\n\n      {isSubmitting && (\n        <div className=\"fixed inset-0 bg-black/10 backdrop-blur-[1px] z-50 flex items-center justify-center\">\n          <Loader message=\"dataBeingSubmitted\" />\n        </div>\n      )}\n\n      <fieldset disabled={isSubmitting} className=\"space-y-6\">\n        {sortedRowKeys.map((rowKey) => (\n          <div key={rowKey} className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {groupedFields[rowKey].map((field) => {\n              const opts = dropdownOptions[field.key] || [];\n              const loading = !!dropdownLoading[field.key];\n              return (\n                <FormField\n                  key={field.key}\n                  field={field}\n                  value={formData[field.key]}\n                  error={errors[field.key]}\n                  options={opts}\n                  // Keep dropdown interactive; show \"Fetching‚Ä¶\" only when opened and missing\n                  onDropdownOpen={() => handleDropdownOpen(field)}\n                  loadingOptions={loading}\n                  onChange={(val) => handleChange(field.key, val)}\n                />\n              );\n            })}\n          </div>\n        ))}\n      </fieldset>\n    </form>\n  );\n}\n\nexport default DynamicFormRenderer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
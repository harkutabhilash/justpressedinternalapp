{"ast":null,"code":"var _jsxFileName = \"/Users/abhilash/Downloads/jp-internal-app/src/modules/Production.jsx\",\n  _s = $RefreshSig$();\n// src/modules/Production.jsx\nimport React from 'react';\nimport DynamicFormRenderer from '../DynamicFormRenderer';\nimport { fetchLogFormConfig } from '../utils/logFormAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Production() {\n  _s();\n  const [cfg, setCfg] = React.useState(null);\n  const [loading, setLoading] = React.useState(true);\n  const [err, setErr] = React.useState('');\n  React.useEffect(() => {\n    let ok = true;\n    (async () => {\n      try {\n        var _dropdownMap$rows;\n        const {\n          configRows,\n          dropdownMap\n        } = await fetchLogFormConfig('production');\n        if (!ok) return;\n        // only the fields visible in app\n        const config = ((configRows === null || configRows === void 0 ? void 0 : configRows.rows) || []).filter(r => String(r.showInApp).toLowerCase() === 'true');\n        setCfg({\n          config,\n          dropdowns: dropdownMap !== null && dropdownMap !== void 0 && (_dropdownMap$rows = dropdownMap.rows) !== null && _dropdownMap$rows !== void 0 && _dropdownMap$rows.length ? buildDropdowns(dropdownMap.rows) : {}\n        });\n      } catch (e) {\n        setErr('Failed to load form.');\n      } finally {\n        ok && setLoading(false);\n      }\n    })();\n    return () => ok = false;\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: \"Loading\\u2026\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 23\n  }, this);\n  if (err) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 text-red-600\",\n    children: err\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 19\n  }, this);\n  return /*#__PURE__*/_jsxDEV(DynamicFormRenderer, {\n    module: \"production\",\n    config: cfg.config,\n    dropdowns: cfg.dropdowns\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(Production, \"u+gAB7Q/Z/SjWOxR9zC9SRlC+ak=\");\n_c = Production;\nfunction buildDropdowns(rows) {\n  // rows is array of objects { seedType, machineNumber, operatorName, ... }\n  const out = {};\n  for (const r of rows) {\n    for (const [k, v] of Object.entries(r)) {\n      if (!v) continue;\n      out[k] ||= new Set();\n      out[k].add(String(v));\n    }\n  }\n  // finalize to arrays\n  for (const k of Object.keys(out)) out[k] = Array.from(out[k]).sort();\n  return out;\n}\nvar _c;\n$RefreshReg$(_c, \"Production\");","map":{"version":3,"names":["React","DynamicFormRenderer","fetchLogFormConfig","jsxDEV","_jsxDEV","Production","_s","cfg","setCfg","useState","loading","setLoading","err","setErr","useEffect","ok","_dropdownMap$rows","configRows","dropdownMap","config","rows","filter","r","String","showInApp","toLowerCase","dropdowns","length","buildDropdowns","e","className","children","fileName","_jsxFileName","lineNumber","columnNumber","module","_c","out","k","v","Object","entries","Set","add","keys","Array","from","sort","$RefreshReg$"],"sources":["/Users/abhilash/Downloads/jp-internal-app/src/modules/Production.jsx"],"sourcesContent":["// src/modules/Production.jsx\nimport React from 'react';\nimport DynamicFormRenderer from '../DynamicFormRenderer';\nimport { fetchLogFormConfig } from '../utils/logFormAPI';\n\nexport default function Production() {\n  const [cfg, setCfg] = React.useState(null);\n  const [loading, setLoading] = React.useState(true);\n  const [err, setErr] = React.useState('');\n\n  React.useEffect(() => {\n    let ok = true;\n    (async () => {\n      try {\n        const { configRows, dropdownMap } = await fetchLogFormConfig('production');\n        if (!ok) return;\n        // only the fields visible in app\n        const config = (configRows?.rows || []).filter(r => String(r.showInApp).toLowerCase() === 'true');\n        setCfg({ config, dropdowns: dropdownMap?.rows?.length ? buildDropdowns(dropdownMap.rows) : {} });\n      } catch (e) {\n        setErr('Failed to load form.');\n      } finally {\n        ok && setLoading(false);\n      }\n    })();\n    return () => (ok = false);\n  }, []);\n\n  if (loading) return <div className=\"p-6\">Loadingâ€¦</div>;\n  if (err) return <div className=\"p-6 text-red-600\">{err}</div>;\n\n  return (\n    <DynamicFormRenderer\n      module=\"production\"\n      config={cfg.config}\n      dropdowns={cfg.dropdowns}\n    />\n  );\n}\n\nfunction buildDropdowns(rows) {\n  // rows is array of objects { seedType, machineNumber, operatorName, ... }\n  const out = {};\n  for (const r of rows) {\n    for (const [k, v] of Object.entries(r)) {\n      if (!v) continue;\n      out[k] ||= new Set();\n      out[k].add(String(v));\n    }\n  }\n  // finalize to arrays\n  for (const k of Object.keys(out)) out[k] = Array.from(out[k]).sort();\n  return out;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}